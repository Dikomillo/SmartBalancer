# Тесты SmartFilter

Юнит-тест для логики SmartFilter расположен в файле `tests/smartfilter.test.js`. Он проверяет сбор доступных опций фильтрации и соответствие элементов выбранным озвучкам/качеству.

## Требования
- Node.js 16+ (подойдёт и более свежая версия).

## Запуск
Выполните команду из корня репозитория:

```bash
node tests/smartfilter.test.js
```

Скрипт не требует дополнительных зависимостей и выводит `SmartFilter tests passed` при успешном выполнении.

## Что делает тест
- Сбрасывает внутреннее состояние SmartFilter перед каждым блоком проверок.
- Убеждается, что `collectSFilterOptions` собирает озвучки и качества из кешированных данных и элементов интерфейса.
- Проверяет, что `matchesSFilterPayload` корректно отфильтровывает элементы по выбранным озвучкам и качеству, а также поддерживает «Оригинал» и отсутствие качества в данных.

Используйте этот тест после изменений в `wwwroot/plugins/smartfilter.js`, чтобы убедиться, что фильтрация продолжает работать правильно.
